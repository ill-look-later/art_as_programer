# 单例的一种线程安全初始化

我们都看到过下面这样的单例初始化
```C
std::shared_ptr<some_resource> resource_ptr;
std::mutex mutex;
void Instance() {
  std::unique_lock<std::mutex> lk(mutex);  //如果存在竞争，线程在此序列化等待 
  if(!resource_ptr) {
    resource_ptr.reset(new some_resource); 
  }
  lk.unlock();
  //resource_ptr->do_something();
}
```